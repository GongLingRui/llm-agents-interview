https://medium.com/%40tonyalfredsson/my-3-15-am-start-to-building-an-ai-image-agent-with-google-adk-gpt-image-1-dev-life-log-1-c0dce525ea85

# 网页内容总结
## 一、文章基础信息
- **标题**：《我凌晨3点15分开始使用谷歌ADK和GPT-Image-1构建AI图像智能体（开发者生活日志 #1）》
- **作者**：Tony Alfredsson（托尼·阿尔弗雷德松）
- **发布时间**：2025年5月8日
- **阅读时长**：6分钟
- **核心主题**：记录使用谷歌ADK（智能体开发工具包）与OpenAI的GPT-Image-1模型构建YouTube缩略图生成AI智能体的过程，包含开发挑战、AI特性及日常工作节奏。


## 二、开发动机与背景
1. **内在驱动**：长期关注人类情感与潜能探索，后渴望通过代码连接“内在想象”与“外在实体”，将想法转化为可运行软件。
2. **外部启发**：受《百万富翁快车道》中“有意识选择”“价值创造”理念影响，决心动手构建实用项目。
3. **系列目的**：通过“开发生活日志（Dev-Life-Log）”分享真实、复杂的学习与开发历程，向开源社区传递灵感。


## 三、开发习惯与时间管理
- **专属创作时段**：因强烈创作欲，常凌晨3点15分起床开发，利用“极致安静时段”专注工作。
- **启动仪式**：通过喝柠檬水、咖啡、“大脑清空”式日记写作，梳理思绪、消除杂念，为编程做准备。
- **生活平衡**：中午跑步（后查看运动数据）、打破15年间歇性禁食习惯吃能量酸奶碗、精心准备晚餐（如香料鱼配米饭蔬菜），将生活琐事视为“可持续创作的必要环节”，而非干扰。


## 四、项目核心信息
### 1. 项目目标
开发一款AI智能体，辅助生成YouTube缩略图，支持图像生成、编辑、组合等功能。

### 2. 技术栈
| 技术/工具                | 用途                          | 补充说明                                  |
|--------------------------|-------------------------------|-------------------------------------------|
| Python                   | 基础开发语言                  | 项目核心编码语言                          |
| 谷歌ADK（Agent Development Kit） | AI智能体框架                  | 定义智能体指令、工具列表，实现流程编排    |
| OpenAI GPT-Image-1       | 图像生成与编辑                | 核心图像处理模型，可替换为其他模型        |
| 其他可选模型             | 图像生成（备用）              | 尝试过Together API+FLUX，计划生产环境用谷歌imagen-3.0-generate-002（需先迁移至Vertex AI，因该模型已从欧盟地区谷歌AI Studio下架） |

### 3. 核心代码结构（关键文件）
| 文件名               | 功能                          | 核心内容摘要                                  |
|----------------------|-------------------------------|-----------------------------------------------|
| `agent.py`           | 智能体初始化                  | 定义“image_agent”，指定模型（gemini-2.0-flash-001）、描述（处理图像生成与提示优化请求）、工具列表（如prompt_enhance_tool、openai_image_generation_tool等） |
| `prompt.py`          | 智能体指令配置                | 存储IMAGE_AGENT_INSTR变量，明确工具用途（如“prompt_enhance_tool用于优化文本描述”）、工作流程（如“纯生成任务需先调用prompt_enhance_tool，再调用openai_image_generation_tool”）及注意事项（如“工具从会话状态获取图像数据，无需手动传递”） |
| `image_generation.py`| 图像生成核心工具              | 封装OpenAI API调用逻辑：接收文本描述→调用GPT-Image-1生成图像→Base64解码图像数据→保存为PNG artifact→返回 artifact信息；含异常处理（如生成失败时记录错误日志） |
| -                    | 完整代码获取                  | 可通过作者提供的GitHub链接查看完整代码        |


## 五、缩略图生成演示（步骤与问题）
以“为本文日志生成缩略图”为例，记录开发中的真实挑战与解决方案：

| 步骤                | 目标                          | 结果与问题                                  | 解决方案                                  |
|---------------------|-------------------------------|---------------------------------------------|-------------------------------------------|
| 步骤1：背景移除     | 去除作者照片背景              | 失败，因“AI安全限制”被拒（推测早间照片“不够正式”触发过滤器） | -                                        |
| 步骤2：人工替代方案 | 解决背景移除问题              | 成功，用Canva手动移除背景，保存为透明PNG格式 | 用传统工具规避AI限制                      |
| 步骤3：图像与文本组合 | 合并透明照片+背景图，添加标题（DEV-LIFE-VLOG）、正文（BUILDING AI AGENTS WITH GOOGLE ADK AND OPENAI）、图标，生成像素风格 | 成功，AI完美实现组合与风格要求              | -                                        |
| 步骤4：文本修改     | 将“and OpenAI”改为“GPT-Image-1” | 失败，AI误解读指令（在检测到的徽标周围生成“掩码”），且触发另一重安全拦截，建议重新开始 | 暴露AI“指令误解”问题与多层安全协议的干预特性 |
| 步骤5：UI故障调试   | 解决“操作后UI无法稳定显示新生成图像”问题 | 成功，定位为“状态更新处理逻辑缺陷”，通过代码修复实现“前端正确反映后端变化” | 非AI问题，需单独调试前端-后端状态同步逻辑  |


## 六、总结与互动
### 1. 核心感悟
- 用AI开发的本质是“管理预期+应对意外”，需接受AI的“离奇特性”（如指令误解），并重视安全限制的影响。
- 小成功（如一次图像组合成功）值得庆祝，“想法落地为实用工具”的背后是“真实节奏+持续调试”。

### 2. 互动提问
- 邀请读者分享“使用AI智能体开发的经历”，尤其是是否遇到类似“AI安全拦截”“指令误解”等问题。
- 作者表示“上下文虽关键，但有时仍无法解决AI异常”，期待读者在评论区交流经验。

### 3. 补充资源
- 完整开发日志可通过作者提供的YouTube链接查看；
- 文章末尾附作者其他相关文章（如《AI为我规划了下一个软件项目》）及Medium推荐内容（如谷歌ADK实战、Text-to-SQL聊天机器人开发等）。
