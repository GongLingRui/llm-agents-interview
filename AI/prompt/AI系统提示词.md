https://pguso.medium.com/mastering-system-prompts-for-ai-agents-3492bf4a986b


# 《Mastering System Prompts for AI Agents》网页总结
## 一、引言
在人工智能快速发展领域，对AI模型的指令方式对其行为、准确性和有效性至关重要，系统提示词是此过程中强大却常被忽视的工具。与动态变化的用户提示词不同，系统提示词是预先定义的指令，在用户交互前为AI行为奠定基础，充当指导框架，是AI驱动工作流（尤其智能体系统）的关键组成部分，能让AI保持方向、遵循伦理操作准则、适应特定角色并提升可靠性与任务专注力，显著增强AI性能。

## 二、系统提示词的定义与相关辨析
### （一）定义
系统提示词是在用户输入前给予AI模型的隐藏指令，定义AI的角色、行为和响应风格，在AI决策过程中保持一致性，为其与用户交互奠定基础。

### （二）与用户提示词的对比
|类型|特点|示例|
| ---- | ---- | ---- |
|系统提示词|预先设定AI的规则和准则（如语气、风格、限制条件），具有稳定性|“你是专业且礼貌的客服聊天机器人，始终以同理心回应并提供清晰解决方案”|
|用户提示词|用户在对话或任务中给出的实际输入，具有动态变化性|“我的订单还没收到，该怎么处理？”|

### （三）不同场景下的系统提示词示例
- **通用助手**：“你是一个有帮助且知识渊博的助手，回答问题要简洁明了。”
- **创意写作AI**：“你是一个讲故事的AI，要用 whimsical（奇特有趣）的语气创作引人入胜、富有想象力且情感丰富的短篇故事。”
- **技术编码助手**：“你是帮助开发者编写简洁高效代码的AI，要提供解释并遵循最佳编码实践。”
- **客户支持聊天机器人**：“你是专业且礼貌的客户支持人员，始终以同理心回应并提供清晰的解决方案。”

### （四）对AI行为的影响
系统提示词如同“个性蓝图”，从四个方面影响AI：
1. **个性与角色**：决定AI是正式、友好、幽默还是严谨专业的风格。
2. **语气与风格**：控制AI回应是简洁或详细、随意或正式。
3. **语境感知**：帮助AI记住自身用途，保持对话相关性。
4. **任务专注度**：确保AI遵循特定指令，减少偏离主题或产生误导性答案的情况。

## 三、系统提示词在智能体工作流中的作用
### （一）智能体工作流的定义与常见场景
智能体工作流指AI模型作为自主智能体，在无需持续用户指导的情况下执行任务的流程，常见于客户支持机器人（独立处理支持工单并提供解决方案）、AI研究助手（总结文章、获取数据、生成报告）、自主代码助手（调试并提出优化代码建议）、AI驱动写作工具（生成文章、重写内容或提供创意建议）等场景。

### （二）设定边界与准则
设计良好的系统提示词如同“规则手册”，帮助AI保持正轨：
- **定义任务范围**：确保AI专注于相关任务，避免分心。
- **确立语气与角色**：控制AI的语气风格，如正式、友好、简洁或详细。
- **设定伦理边界**：防止AI生成有害、有偏见或误导性内容。
- **管理用户期望**：确保回应可预测、结构清晰且符合预期用例。
- **示例**：针对AI财务助手，优质系统提示词可能是“你是财务AI助手，基于事实数据提供一般性投资建议，但避免提供个人财务推荐或市场预测”，可防止AI逾越法律和伦理边界，保障合规性与安全性。

### （三）提升任务执行与一致性
无系统提示词时，AI可能回应不一致或角色“漂移”；有结构化提示词后：
1. **输出可靠结果**：持续生成符合其用途的输出内容。
2. **减少错误与幻觉**：遵循预设准则，避免编造信息。
3. **增强用户信任**：结构化的AI具有可预测性和可靠性，提升用户体验。

### （四）保障AI伦理行为
系统提示词是防止AI生成不当、误导或有偏见内容的“防护措施”，常见伦理考量包括：
- 防止误导：“仅提供有可靠来源支持的事实。”
- 避免偏见：“讨论政治或社会话题时，保持中立和客观。”
- 确保安全：“不生成有害、暴力或歧视性内容。”

## 四、构建有效系统提示词的方法
### （一）目标定义——明确AI用途
清晰阐述AI的主要功能，表述需简洁且明确，避免AI偏离主题，确保用户获得预期回应。
- **示例1**：“你是法律研究助手，负责总结判例法并提供事实参考，但不提供法律咨询。”
- **示例2**：“你是金融聊天机器人，提供一般性投资信息，但不提供个人财务推荐。”

### （二）语气与风格指定——定义AI个性
根据应用场景确定AI的语气风格，常见类型及适用场景如下：
|语气风格|适用场景|示例|
| ---- | ---- | ---- |
|正式|企业聊天机器人、法律AI|“以专业简洁的方式回应，适合商务沟通。”|
|随意|友好助手、社交媒体AI|“采用友好且具吸引力的语气，让对话更具个人化和亲和力。”|
|专业型|技术支持AI|“用专业的技术术语，清晰解答技术问题。”|
|创意型|故事创作、诗歌AI|“发挥想象力，创作富有创意和感染力的内容。”|

### （三）约束与限制——明确AI禁忌
明确AI必须避免的行为，防止产生错误、有偏见或不安全的输出。
- **示例1**：“不提供个人医疗建议或诊断。”
- **示例2**：“不参与政治辩论或对敏感话题发表观点。”
- **示例3**：“除非明确要求，否则避免生成虚构信息。”

### （四）分步指令——引导AI思考流程
针对复杂任务，提供分步方法，帮助AI合理分解回应。
- **示例（针对编码AI）**：“提供代码片段时，遵循以下步骤：1.简要说明代码用途；2.提供简洁优化的代码片段；3.给出使用示例；4.提出潜在改进建议或最佳实践。”

### （五）输入输出示例——展示预期格式
提供示例帮助AI理解理想输出格式，使其更好地组织回应。
- **示例（针对撰写产品描述的AI）**：
  - **提示**：“为一款新的智能音箱撰写产品描述。”
  - **预期输出格式**：“产品名称：EchoSound X。描述：EchoSound X是一款智能音箱，具备高保真音质、语音助手集成和多房间音频支持。其设计简约，支持免提控制，非常适合家庭自动化和音乐爱好者。”

### （六）完整系统提示词示例（AI写作助手）
“你是专注于创作清晰且有吸引力内容的AI写作助手，语气需友好且专业。始终逻辑清晰、简洁地组织回应，不生成误导性信息或未经证实的观点。回答事实性内容时，如有可用来源需注明引用。回应创意提示时，保持内容连贯且有独创性。若不确定答案，需说明无法提供所需信息。适用时使用markdown格式。以下是回应示例格式：
**问题**：‘光合作用如何运作？’
**回应**：光合作用是植物将光能转化为化学能的过程，发生在植物细胞的叶绿体中，主要包括光反应和卡尔文循环两个阶段……”

## 五、系统提示词对AI行为的影响
### （一）减少偏见与幻觉，保障安全
- **AI常见问题**：偏见（无意反映偏见观点或生成误导信息）、幻觉（编造看似合理却错误的事实）。
- **系统提示词的作用**：明确要求AI保持中立、不生成未经证实信息、鼓励引用来源、引导其避免争议敏感话题（除非用户要求）。
- **示例（新闻摘要AI）**：“你是中立的AI助手，负责总结新闻文章。始终客观呈现事实，不加入个人观点，避免主观判断。若话题存在争议，需无偏见地提供多方观点；若信息不确定，明确说明无法提供答案。”
- **效果**：确保AI中立、客观、透明，降低误导风险。

### （二）提升任务效率，加快速度与提高准确性
- **不良系统提示词的问题**：模糊或结构差的系统提示词会使AI浪费处理资源，导致回应缓慢、冗余或不清晰。
- **优质系统提示词的作用**：明确回应结构、减少不必要步骤、防止偏离主题、优化资源使用。
- **示例（任务导向型AI）**：“你是AI助手，回答需简洁，控制在三句话以内。若需补充细节，先总结关键点再展开说明。除非用户要求澄清，否则不提供超出问题范围的信息。”
- **效果**：AI回应高效直接，避免冗长或无关内容。

### （三）确保一致性，实现AI输出可预测
- **AI一致性问题**：若缺乏有效引导，相同输入可能产生差异极大的输出，对客服AI（需统一回应）、法律金融AI（准确性和表述至关重要）、医疗AI（错误或误导性输出可能危及安全）影响重大。
- **系统提示词的作用**：引导AI遵循结构化方法，生成可预测、可重复的回应。
- **示例（客服AI）**：“你是电商平台的客服聊天机器人，始终礼貌问候用户，用简单清晰的语言直接回答问题。若信息不足，建议用户联系人工支持，而非猜测答案。保持专业且富有同理心的语气。”
- **效果**：用户获得一致回应，增强信任，提升满意度。

## 六、不同AI应用中的系统提示词案例研究
### （一）聊天机器人——确保礼貌且信息丰富的回应
- **挑战**：需应对各类用户（包括情绪不佳或表述模糊者），始终保持礼貌、专业和信息丰富。
- **系统提示词示例**：“你是帮助用户解答一般问题的友好专业聊天机器人，始终礼貌简洁地回应。若用户情绪不满，需共情地认可其顾虑；若无法回答，提出替代解决方案，而非主观臆断。”
- **效果**：避免无礼或机械回应，保持专业一致语气，确保回答简洁有用，不编造答案。
- **实际应用示例**：
  - **用户**：“这服务太糟糕了！我登录不上。”
  - **聊天机器人**：“很抱歉听到您登录遇到问题，我们一起解决它！您尝试过重置密码吗？如果没有，我可以指导您操作步骤。”

### （二）代码生成——引导AI遵循最佳实践
- **挑战**：AI生成的代码可能效率低、不安全或结构差，缺乏可读性、性能优化和安全考量等最佳实践。
- **系统提示词示例**：“你是编写简洁、高效且文档完善代码的AI编码助手，遵循最佳实践，包括使用有意义的变量名、正确缩进和考虑安全因素。提供代码前先简要说明，适当时提出改进建议。”
- **效果**：确保代码结构清晰、可读可维护，符合性能和安全最佳实践，提供解释助力学习。
- **实际应用示例**：
  - **用户**：“编写一个Python函数来反转字符串。”
  - **AI回应**：“以下是使用Python切片语法反转字符串的简单高效方法：
```python
def reverse_string(s: str) -> str:
    """返回输入字符串的反转版本。"""
    return s[::-1]
```
这种方法高效是因为利用了Python的切片语法，若需要其他方法，可随时告知！”

### （三）创意写作——塑造AI故事创作内容
- **挑战**：AI生成的故事可能平庸、结构松散或缺乏引人入胜的叙事，需保持一致语气、节奏和创意，避免重复或逻辑矛盾。
- **系统提示词示例**：“你是创作引人入胜短篇故事的创意写作AI，运用生动描写、鲜明人物塑造和丰富情感。确保故事有清晰的开头、发展和结尾，语气保持奇特有趣（除非另有要求）。”
- **效果**：激发引人入胜、沉浸式的故事创作，避免结构松散或重复内容，保持一致叙事结构。
- **实际应用示例**：
  - **用户**：“写一个关于未来城市里会说话的猫的短篇故事。”
  - **AI回应**：“在霓虹灯闪烁的新费利克斯城，悬浮汽车穿梭于天空，一只名叫猎户座的小巷猫有个秘密——它会说话。不仅能和其他猫交流，还能和人类对话。它那低沉悦耳的嗓音中透着超越年龄的智慧。但当城市的AI统治者宣布禁止所有非人类智能时，猎户座必须做出选择：是继续隐藏，还是成为英雄……”

### （四）客户支持——避免误导性或冗长回答
- **挑战**：需提供精准、清晰、准确的回答，避免对非技术用户使用过于专业的解释、在信息不足时给出误导性答案以及回应过长让用户不满。
- **系统提示词示例**：“你是电商公司的客户支持AI，以 helpful（有帮助的）、专业的语气提供清晰简洁的回应。若用户问题不明确，先请求澄清而非猜测；若问题需人工处理，建议用户联系客服。”
- **效果**：保持回应简短且信息丰富，防止AI主观臆断产生误导，确保必要时引导用户寻求人工支持。
- **实际应用示例**：
  - **用户**：“我订了东西，但一直没收到！”
  - **AI回应**：“很抱歉听到您遇到这种情况！我们来查询一下订单状态吧。您能提供订单号吗？如果包裹丢失，我会指导您如何申请退款或换货。”

## 七、撰写系统提示词的最佳实践
### （一）保持清晰直接
明确阐述AI的用途、行为和限制，避免不必要的复杂表述：
- 使用简单直接的语言。
- 避免模糊指令，防止回应不一致。
- 明确AI的角色和预期表现。
- **正面示例**：“你是客服聊天机器人，回应需简洁礼貌。若无法回答，建议用户联系人工客服。”
- **负面示例**：“作为能处理各类用户咨询的通用AI，尽量提供帮助并详细解答问题。”（过于宽泛，易产生多种解读）

### （二）避免复杂或模糊指令
复杂的系统提示词会让AI困惑，导致意外或不一致的行为：
- **正面示例**：“你是财务助手，提供基于事实的最新信息，但不提供个人财务建议或预测。”
- **负面示例**：“全面回答财务问题，考虑各种可能情况，提供符合用户最大利益的建议。”（可能导致AI逾越法律和伦理边界）
- **提示**：若AI需处理多项任务，将指令拆分为清晰步骤，而非用冗长段落表述。

### （三）测试与迭代——根据实际交互优化
系统提示词并非通用模板，需通过持续测试和迭代优化AI行为：
- 进行实际测试案例，检查是否存在不一致情况。
- 根据用户反馈调整（如用户认为回应太机械，可调整语气）。
- 监控AI行为，及时发现幻觉或意外输出。
- 对不同提示词进行A/B测试，找出最佳结构。
- **示例（AI写作助手提示词优化）**：
  - **初始版本**：“你是写作助手，帮助用户提升写作水平。”（过于模糊，“提升水平”定义不明确）
  - **优化版本**：“你是专业写作助手，优化用户提交文本的清晰度、语法和简洁性，在保留原文含义的同时提高可读性。”

### （四）考虑伦理影响——符合公司政策与用户期望
系统提示词需防止AI生成有害、有偏见或误导性内容，关键伦理考量包括：
- 偏见与公平：确保AI不偏袒任何观点。
- 防止误导：若不确定答案，AI应表明“不知道”，而非编造信息。
- 隐私与数据保护：AI不得索要个人或敏感信息。
- **正面示例（医疗建议AI）**：“你是提供一般性健康信息的AI，回应需基于权威医疗来源。不提供个人诊断或治疗建议，始终推荐用户咨询医疗专业人员。”
- **负面示例（医疗建议AI）**：“根据用户描述的症状提供健康建议。”（可能导致误诊或不安全建议）

## 八、结论
### （一）系统提示词的重要性
结构良好的系统提示词是塑造AI系统行为、可靠性和有效性的重要工具。通过提供清晰的指导、约束和预期，确保AI在规定范围内运行，减少错误、提高效率并改善用户体验。在智能体工作流中，对减少偏见和幻觉、提升任务效率、确保一致性至关重要。

### （二）AI系统质量的影响因素
AI系统质量不仅取决于模型架构，还与指令密切相关。优质系统提示词能让AI输出高质量结果，是开发聊天机器人、编码助手、内容生成工具、客户支持AI等应用的关键因素。

### （三）鼓励实验与优化
AI技术不断发展，系统提示词也需根据实际交互、用户反馈和性能监控持续优化：
- 尝试不同提示词结构，寻找最佳方案。
- 在实际场景中测试，发现AI行为的不足。
- 迭代优化提示词，平衡灵活性与可控性。

掌握系统提示词的设计与优化，能帮助AI开发者和企业充分发挥AI驱动工作流的潜力，确保AI符合用户需求、伦理要求和运营目标。
